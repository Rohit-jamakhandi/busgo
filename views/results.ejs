<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="h3" style="color: #333; font-weight: 700;">
        <% if (buses && buses.length > 0) { %>
          <span data-i18n="busesFound"><%= buses.length %> Bus<%= buses.length > 1 ? 'es' : '' %> Found</span>
        <% } else { %>
          <span data-i18n="searchResults">Search Results</span>
        <% } %>
      </h1>
      <% if (query && query.from && query.to) { %>
        <p class="text-muted mb-0">
          <span class="badge bg-light text-dark"><%= query.from %></span>
          →
          <span class="badge bg-light text-dark"><%= query.to %></span>
          <% if (query.date) { %>
            | <span class="badge bg-light text-dark d-inline-flex align-items-center gap-1">
              <i data-lucide="calendar" style="width: 14px; height: 14px;"></i>
              <%= query.date %>
            </span>
          <% } %>
        </p>
      <% } %>
    </div>
    <a href="/" class="btn btn-outline-primary d-flex align-items-center gap-2">
      <i data-lucide="arrow-left" style="width: 18px; height: 18px;"></i>
      <span data-i18n="newSearch">New Search</span>
    </a>
  </div>

  <% if (!buses || buses.length === 0) { %>
    <div class="card text-center py-5">
      <div class="card-body">
        <div style="opacity: 0.3; margin-bottom: 1rem;">
          <i data-lucide="bus" style="width: 80px; height: 80px; color: #667eea;"></i>
        </div>
        <h3 class="mt-3" data-i18n="noBusesFound">No Buses Found</h3>
        <p class="text-muted" data-i18n="tryDifferentSearch">Try searching with different cities or dates</p>
        <a href="/" class="btn btn-primary mt-3 d-inline-flex align-items-center gap-2">
          <i data-lucide="search" style="width: 18px; height: 18px;"></i>
          <span data-i18n="searchAgain">Search Again</span>
        </a>
      </div>
    </div>
  <% } else { %>
    <div class="row g-3">
      <% buses.forEach((bus, index) => { %>
        <div class="col-12 fade-in" style="animation-delay: <%= index * 0.1 %>s;">
          <div class="bus-card">
            <div class="d-flex justify-content-between align-items-start flex-wrap">
              <div class="flex-grow-1">
                <div class="bus-name"><%= bus.bus_name %></div>
                <div class="bus-route"><%= bus.from %> → <%= bus.to %></div>
                
                <div class="bus-details mt-3">
                  <div class="bus-detail-item">
                    <i data-lucide="clock" class="icon" style="width: 18px; height: 18px;"></i>
                    <span><strong data-i18n="departure">Departure:</strong> <%= bus.time %></span>
                  </div>
                  <div class="bus-detail-item">
                    <i data-lucide="calendar" class="icon" style="width: 18px; height: 18px;"></i>
                    <span><%= new Date(bus.date).toLocaleDateString('en-IN', { day: 'numeric', month: 'short', year: 'numeric' }) %></span>
                  </div>
                  <div class="bus-detail-item">
                    <i data-lucide="armchair" class="icon" style="width: 18px; height: 18px;"></i>
                    <span class="seats-badge"><%= bus.available_seats %> <span data-i18n="seatsAvailable">seats available</span></span>
                  </div>
                  <div class="bus-detail-item">
                    <i data-lucide="ticket" class="icon" style="width: 18px; height: 18px;"></i>
                    <span class="text-muted"><span data-i18n="busId">Bus ID:</span> <%= bus.bus_id %></span>
                  </div>
                </div>
              </div>
              
              <div class="text-end mt-3 mt-md-0">
                <div class="fare-badge mb-3">₹<%= bus.fare %></div>
                <% if (bus.available_seats > 0) { %>
                  <a class="btn btn-success btn-lg d-flex align-items-center gap-2" href="/buses/<%= bus._id %>/booking">
                    <span data-i18n="bookNow">Book Now</span>
                    <i data-lucide="arrow-right" style="width: 18px; height: 18px;"></i>
                  </a>
                <% } else { %>
                  <button class="btn btn-secondary btn-lg" disabled data-i18n="soldOut">Sold Out</button>
                <% } %>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>
</div>
